# Phase 3: analyze_image å·¥å…·å®ç°

> **çŠ¶æ€**: ğŸ”„ è¿›è¡Œä¸­  
> **å¼€å§‹æ—¶é—´**: 2026-01-23

---

## 1. ç›®æ ‡

æ·»åŠ  `analyze_image` å·¥å…·ï¼Œè®© LLM åœ¨æ‰§è¡Œä»»åŠ¡æ—¶å¯ä»¥ä¸»åŠ¨åˆ†æå›¾ç‰‡ã€‚

---

## 2. æ€è€ƒè¿‡ç¨‹

### 2.1 ä½¿ç”¨åœºæ™¯

1. LLM åœ¨æ‰§è¡Œ"åˆ†æ UI è®¾è®¡"ä»»åŠ¡æ—¶ï¼Œè°ƒç”¨å·¥å…·è¯»å–å›¾ç‰‡
2. ç”¨æˆ·æä¾›æˆªå›¾è·¯å¾„ï¼ŒLLM è‡ªåŠ¨è°ƒç”¨å·¥å…·åˆ†æ
3. æµç¨‹å›¾/æ¶æ„å›¾åˆ†æ

### 2.2 å·¥å…·è®¾è®¡

```python
def analyze_image(
    path: str,
    question: str = "è¯·æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹",
) -> ToolResult:
    """
    åˆ†æå›¾ç‰‡å†…å®¹ã€‚
    
    Args:
        path: å›¾ç‰‡è·¯å¾„ï¼ˆæœ¬åœ°è·¯å¾„æˆ– URLï¼‰
        question: å¯¹å›¾ç‰‡çš„æé—®
    
    Returns:
        åŠ è½½æˆåŠŸè¿”å›å›¾ç‰‡æ•°æ®ï¼ˆBase64ï¼‰ï¼Œç”± LLM å¤„ç†
    """
```

### 2.3 å®ç°æ€è·¯

1. åˆ›å»º `src/clude_code/tooling/tools/analyze_image.py`
2. åœ¨ `tool_dispatch.py` ä¸­æ³¨å†Œå·¥å…·
3. å·¥å…·è¿”å›å›¾ç‰‡æ•°æ®ï¼Œç”± AgentLoop å¤„ç†

**å…³é”®ç‚¹**ï¼š
- å·¥å…·æœ¬èº«ä¸è°ƒç”¨ LLMï¼Œåªè´Ÿè´£åŠ è½½å›¾ç‰‡
- å›¾ç‰‡æ•°æ®ä¼šä½œä¸ºå·¥å…·ç»“æœå›å–‚ç»™ LLM
- LLM ä¼šçœ‹åˆ°å›¾ç‰‡å¹¶ç»™å‡ºåˆ†æ

---

## 3. å®ç°æ­¥éª¤

- [x] 3.1.1 åˆ›å»º `analyze_image.py` å·¥å…·å®ç° âœ…
- [x] 3.1.2 åœ¨ `tool_dispatch.py` æ³¨å†Œå·¥å…· âœ…
- [x] 3.1.3 ç¼–è¯‘æ£€æŸ¥ âœ… é€šè¿‡
- [x] 3.1.4 å¯¼å…¥æµ‹è¯• âœ… é€šè¿‡

---

## 4. ä»£ç å˜æ›´æ¸…å•

| æ–‡ä»¶ | å˜æ›´ç±»å‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| `src/clude_code/tooling/tools/analyze_image.py` | æ–°å¢ | å·¥å…·å®ç° |
| `src/clude_code/orchestrator/agent_loop/tool_dispatch.py` | ä¿®æ”¹ | æ³¨å†Œå·¥å…· |


