<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="350" viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg">
  <style>
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes slide { from { stroke-dashoffset: 20; } to { stroke-dashoffset: 0; } }
    .box { fill: #fff; stroke: #333; stroke-width: 2; rx: 5; }
    .text { font-family: sans-serif; font-size: 12px; font-weight: bold; }
    .arrow { stroke: #666; stroke-width: 2; fill: none; stroke-dasharray: 5; animation: slide 1s linear infinite; }
    .status { fill: #43a047; font-size: 10px; animation: pulse 2s infinite; }
  </style>
  <rect width="800" height="350" fill="#fdfdfd"/>
  
  <!-- Boxes -->
  <g transform="translate(50, 150)">
    <rect class="box" width="120" height="60"/>
    <text x="60" y="35" class="text" text-anchor="middle">文件扫描器</text>
    <text x="60" y="52" class="status" text-anchor="middle">● Scanning</text>
  </g>
  <path class="arrow" d="M170 180 H230"/>
  
  <g transform="translate(230, 150)">
    <rect class="box" width="120" height="60"/>
    <text x="60" y="35" class="text" text-anchor="middle">AST 逻辑分块</text>
  </g>
  <path class="arrow" d="M350 180 H410"/>

  <g transform="translate(410, 150)">
    <rect class="box" width="120" height="60" style="fill: #fff9c4;"/>
    <text x="60" y="35" class="text" text-anchor="middle">fastembed (CPU)</text>
    <text x="60" y="52" class="status" text-anchor="middle" style="fill: #f57f17;">● Embedding...</text>
  </g>
  <path class="arrow" d="M530 180 H590"/>

  <g transform="translate(590, 150)">
    <rect class="box" width="120" height="60" style="fill: #e8f5e9; stroke: #2e7d32;"/>
    <text x="60" y="35" class="text" text-anchor="middle">LanceDB 写入</text>
  </g>

  <!-- Labels -->
  <text x="400" y="50" class="text" font-size="18" text-anchor="middle">LanceDB 后台异步全量索引流程</text>
  <text x="400" y="280" font-family="sans-serif" font-size="11" fill="#888" text-anchor="middle">解耦对话与计算：在不影响模型回复的情况下，静默构建知识库</text>
</svg>

